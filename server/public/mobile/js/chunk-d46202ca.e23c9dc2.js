(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d46202ca"],{"0419":function(t,e,a){"use strict";var s=a("23c4"),i=a.n(s);i.a},"1c70":function(t,e,a){},"23c4":function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("6b75");function i(t){if(Array.isArray(t))return Object(s["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=a("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||o(t)||Object(r["a"])(t)||n()}},"6a99":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-goods bg-white"},t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"item-wrap",on:{click:function(a){t.link&&t.goPage("goodsDetail",{id:e.goods_id})}}},[a("div",{staticClass:"item row"},[a("div",{staticClass:"goods-img"},[a("van-image",{attrs:{width:"100%",radius:"5px",height:"100%",src:e.image_str||e.image}})],1),a("div",{staticClass:"goods-info ml10"},[a("div",{staticClass:"goods-name two-txt-cut mb5"},[t._v(" "+t._s(e.goods_name||e.name))]),a("div",{staticClass:"goods-spec xs muted mb10"},[t._v(t._s(e.spec_value_str))]),a("div",{staticClass:"row-between"},[a("div",{staticClass:"goods-price"},[a("div",{staticClass:"lg primary row"},[a("span",{staticClass:"sm"},[t._v("￥")]),a("div",{staticClass:"xl"},[a("price-slice",{attrs:{weight:500,price:e.goods_price}})],1)])]),a("div",{staticClass:"goods-num sm"},[t._v("x"+t._s(e.goods_num))])])])]),t.link&&e.comment_btn?a("div",{staticClass:"footer row"},[a("div",{staticStyle:{flex:"1"}}),e.comment_btn?a("div",{on:{click:function(a){return t.goPage("commodityEvaluation",{id:e.id})}}},[a("button",{staticClass:"plain br60",attrs:{size:"xs"}},[t._v("评价晒图")])]):t._e(),a("div",{staticClass:"ml10"},[a("button",{staticClass:"plain br60",attrs:{size:"xs"},on:{click:function(a){return t.goPage("applyAfterSales",{item_id:e.item_id,order_id:e.order_id})}}},[t._v("申请退款")])])]):t._e()])})),0)},i=[],o=(a("a9e3"),{name:"OrderGoods",components:{},props:{list:{type:Array,default:function(){return[]}},link:{type:Boolean,default:!1},shopId:{type:Number}},methods:{goPage:function(t,e){this.$router.push({name:t,query:e})}}}),r=o,n=(a("73c4"),a("2877")),c=Object(n["a"])(r,s,i,!1,null,"b8ee5e96",null),d=c.exports;e["a"]=d},"73c4":function(t,e,a){"use strict";var s=a("1c70"),i=a.n(s);i.a},7733:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-evaluate-detail"},[a("order-goods",{attrs:{list:[t.goods]}}),a("div",{staticClass:"goods-evaluate row"},[a("div",{staticClass:"label nr"},[t._v("商品评价")]),a("van-rate",{attrs:{color:t.primaryColor},on:{change:t.goodsRateChange},model:{value:t.goodsRate,callback:function(e){t.goodsRate=e},expression:"goodsRate"}}),a("div",{staticClass:"rate-desc muted nr",class:{primary:t.goodsRate>=3},attrs:{hidden:0==t.goodsRate}},[t._v(t._s(t.rateDesc))])],1),a("div",{staticClass:"rate bg-white"},[a("div",{staticClass:"item nr lighter mb10"},[t._v("其他评价")]),a("div",{staticClass:"item row mb10"},[a("div",{staticClass:"label"},[t._v("描述相符")]),a("van-rate",{attrs:{color:t.primaryColor},model:{value:t.descRate,callback:function(e){t.descRate=e},expression:"descRate"}})],1),a("div",{staticClass:"item row mb10"},[a("div",{staticClass:"label"},[t._v("服务态度")]),a("van-rate",{attrs:{color:t.primaryColor},model:{value:t.serverRate,callback:function(e){t.serverRate=e},expression:"serverRate"}})],1),a("div",{staticClass:"item row"},[a("div",{staticClass:"label"},[t._v("配送服务")]),a("van-rate",{attrs:{color:t.primaryColor},model:{value:t.deliveryRate,callback:function(e){t.deliveryRate=e},expression:"deliveryRate"}})],1)]),a("div",{staticClass:"goods-dec bg-white"},[a("div",{staticClass:"title mb10 md"},[t._v("商品描述")]),a("van-field",{staticClass:"textarea bg-gray mb20 nr",attrs:{rows:"4",autosize:"",type:"textarea",placeholder:"宝贝收到还满意吗，说说你的使用心得。分享给想买的他们吧！！"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("van-uploader",{staticStyle:{"margin-top":"15px"},attrs:{"preview-size":"80px","file-list":t.fileList,multiple:"","max-count":"5","after-read":t.afterRead},on:{delete:t.onDelete}})],1),a("button",{staticClass:"btn bg-primary white br60 row-center",on:{click:t.onSubmit}},[t._v("立即评价")])],1)},i=[],o=(a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("5530")),r=a("2909"),n=(a("96cf"),a("1da1")),c=a("6a99"),d=a("5f01"),l=a("c24f"),u=a("bc3a"),m=a.n(u),v=a("2f62"),f={name:"commodityEvaluation",components:{OrderGoods:c["a"]},data:function(){return{goodsRate:0,descRate:0,serverRate:0,deliveryRate:0,comment:"",rateDesc:"差评",fileList:[],goods:[]}},created:function(){var t=this.$route.query.id;this.id=t,this.$getCommentInfo()},methods:{goodsRateChange:function(t){this.rateDesc=t<=2?"差评":3==t?"中评":"好评"},onSubmit:function(){var t=this,e=this.goodsRate,a=this.fileList,s=this.comment,i=this.deliveryRate,o=this.descRate,r=this.serverRate,n=a.map((function(t){return t.url}));return e?o?r?i?void Object(l["z"])({id:this.id,goods_comment:e,service_comment:r,express_comment:i,description_comment:o,comment:s,image:n}).then((function(e){1==e.code&&(t.$toast("评价成功"),setTimeout((function(){t.$router.replace({name:"goodsEvaluate",query:{type:1}})}),1e3))})):this.$toast("请对配送服务进行评分"):this.$toast("请对服务态度进行评分"):this.$toast("请对描述相符进行评分"):this.$toast("请对商品进行评分")},$getCommentInfo:function(){var t=this;Object(l["n"])({id:this.id}).then((function(e){1==e.code&&(t.goods=e.data)}))},afterRead:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=[],t.length?t.forEach((function(t){s.push(e.uploadFile(t.file))})):s.push(e.uploadFile(t.file)),Promise.all(s).then((function(t){var a=e.fileList,s=void 0===a?[]:a;s.push.apply(s,Object(r["a"])(t)),e.$toast().clear(),e.fileList=s}));case 3:case"end":return a.stop()}}),a)})))()},uploadFile:function(t){var e=this,a=new FormData;return a.append("file",t),new Promise((function(t){m.a.post(d["b"]+"file/formimage",a,{headers:{"Content-Type":"multipart/form-data",token:e.token}}).then((function(a){var s=a.data;1==s.code?t(s.data):e.$toast("上传失败，请重新上传")}))}))},onDelete:function(t){this.fileList=this.fileList.filter((function(e){return e.name!=t.name}))}},computed:Object(o["a"])({},Object(v["c"])(["token"]))},p=f,b=(a("0419"),a("2877")),g=Object(b["a"])(p,s,i,!1,null,"8a657ee8",null);e["default"]=g.exports},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,o=a("1dde"),r=a("ae40"),n=o("map"),c=r("map");s({target:"Array",proto:!0,forced:!n||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-d46202ca.e23c9dc2.js.map